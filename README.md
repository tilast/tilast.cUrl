# Класс для работы с библиотекой cUrl tilast.cUrl 0.1

## Введение
cURL – это специальный инструмент, который предназначен для того, чтобы передавать файлы и данные синтаксисом URL.
Данная технология поддерживает множество протоколов, таких как HTTP, FTP, TELNET и многие другие.
В PHP cUrl поддерживаеться как расширение.

## Что умеет делать наш класс
Класс предназначен, прежде всего, для надежного получения информации по заданному url'у.
Нет поддержки мультизапросов.

У класса есть несколько методов.

### Конструктор
Инициализирует работу cUrl. В член класса $handler записываеться ресурс-указатель на текущее cUrl-соединение
Конструктор принимает(может не принимать, их можно передать позже методом setParams) json-строку или массив с параметрами для функции с библиотеки cUrl curl_setopt.
[PHP мануал работы с cUrl](http://php.net/manual/en/book.curl.php)
В качестве ключей надо передавать не обычные curl_setopt константы. Например, константу **CURLOPT_URL** надо передать
просто как **url**, **CURLOPT_POST** - **post**.
Параметры **returntransfer** и **useragent** установлены по умолчанию(но их можно изменить).
Пример json-строки:

    {
        "url" : "http://google.com.ua",
        "post" : "1",
        "postfields" : "name=Some&surname=Body"
    }
    
Пример массива:

    array
    (
        "url" => "http://google.com.ua",
        "post" => "1",
        "postfields" => "name=Some&surname=Body"
    )

*Заметка*: параметр **postfields** привилегированный. 
Вы можете спокойно в методах setParam и setParams передавать его значение не только как подготовленную к запросу строку,
а как ассоциативный массив или json-строку. Пример:

    array
    (
        "url" => "http://google.com.ua",
        "post" => "1",
        "postfields" => array("name" => "John", "surname" => "Smith")
    )


### setParams
Метод принимает в себя json-строку или массив с параметрами для функции с библиотеки cUrl curl_setopt.
Детальнее см. пункт Конструктор

### setParam
Метод принимает в себя название параметра и его значение, устанавливая его в текущий curl-запрос.
Если параметром является **postfields**, можно в качестве значения передавать json-строку или массив. 

### Exec
Метод выполняет текущий подготовленный спараметризированный cUrl-запрос
В случае удачи возвращает результат, полученный с данного url.
В случае неудачи возвращает false.

### getInfo
Метод возвращает информацию о текущем cUrl-запросе

### Деструктор
Закрывает текущее cUrl-соединение

## Пример роботы
[Можно испробовать примеры на php.net](http://php.net/manual/en/curl.examples.php)

Простой пример:

    try
    {
        $curl = new Curl
        ('{
            "url":"http://google.com.ua/",
            "post": 1,
            "postfields": 
                {
                    "name": "John",
                    "surname": "Smith"
                }
        }');
        echo $curl->exec();
    }
    catch(CurlException $e)
    {
        echo $e->getMessage();
    }
