# Класс для работы с библиотекой cUrl tilast.cUrl 0.1

## Введение
cURL – это специальный инструмент, который предназначен для того, чтобы передавать файлы и данные синтаксисом URL.
Данная технология поддерживает множество протоколов, таких как HTTP, FTP, TELNET и многие другие.
В PHP cUrl поддерживаеться как расширение.

## Что умеет делать наш класс
Класс предназначен, прежде всего, для надежного получения информации по заданному url'у.
Нет поддержки мультизапросов.

У класса есть несколько методов.

### Конструктор
Инициализирует работу cUrl. В член класса $handler записываеться ресурс-указатель на текущее cUrl-соединение
Конструктор принимает(может не принимать, их можно передать позже методом setParams) json-строку или массив с параметрами для функции с библиотеки cUrl curl_setopt.
[PHP мануал работы с cUrl](http://php.net/manual/en/book.curl.php)
В качестве ключей надо передавать не обычные curl_setopt константы. Например, константу **CURLOPT_URL** надо передать
просто как **url**, **CURLOPT_POST** - **post**.
Параметры **returntransfer** и **useragent** установлены по умолчанию(но их можно изменить).
Пример json-строки:

    {
        "url" : "http://google.com.ua",
        "post" : "1",
        "postfields" : "name=Some&surname=Body"
    }
    
Пример массива:

    array
    (
        "url" => "http://google.com.ua",
        "post" => "1",
        "postfields" => "name=Some&surname=Body"
    )

Для работы с POST-запросами существует метод setPost. Детальнее о нем в пункте setPost.

### setParams
Метод принимает в себя json-строку или массив с параметрами для функции с библиотеки cUrl curl_setopt.
Вызываеться, если вы не задали параметры в конструкторе.
Детальнее см. пункт Конструктор

### setPost
Принимает массив, который вы хотите передать cUrl-запросом.
Можно передавать собственно массивом или json-строкой.
Вызывать после создания объекта(если в конструктор передаются параметры) или после вызова метода setParams
Пример:

    $curl->setPost
    (
        array("name" => "Some", "surname" => "Body")
        //'{"name" : "Some", "surname" : "Body"}'
    );

### Exec
Метод выполняет текущий подготовленный спараметризированный cUrl-запрос
В случае удачи возвращает результат, полученный с данного url.
В случае неудачи возвращает false.

### getInfo
Метод возвращает информацию о текущем cUrl-запросе

### Деструктор
Закрывает текущее cUrl-соединение

## Пример роботы
[Можно испробовать примеры на php.net](http://php.net/manual/en/curl.examples.php)

Простой пример:

    try
    {
        $curl = new Curl
        ('{
            "url":"http://google.com.ua/",
            "returntransfer": true
        }');
        echo $curl->exec();
    }
    catch(CurlException $e)
    {
        echo $e->getMessage();
    }
